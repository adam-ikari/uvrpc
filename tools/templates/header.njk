/**
 * Auto-generated header file for {{ serviceName }}
 * Generated from {{ yamlPath }}
 * Do not edit this file manually
 */

#ifndef {{ headerGuard }}
#define {{ headerGuard }}

#ifdef __cplusplus
extern "C" {
#endif

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>

/* Service metadata */
#define {{ serviceName | upper }}_VERSION "{{ version }}"
#define {{ serviceName | upper }}_DESCRIPTION "{{ description }}"

/* ==================== Request Structures ==================== */
{% for method in methods %}
/* {{ method.name }} request structure */
typedef struct {{ structName(serviceName, method.name, 'Request') }} {
{% for field in method.request.fields %}
    {{ cType(field.type) }} {{ field.name }};    /* {{ field.description | default('') }} */
{% endfor %}
} {{ structName(serviceName, method.name, 'Request') }}_t;

{% endfor %}

/* ==================== Response Structures ==================== */
{% for method in methods %}
/* {{ method.name }} response structure */
typedef struct {{ structName(serviceName, method.name, 'Response') }} {
{% for field in method.response.fields %}
    {{ cType(field.type) }} {{ field.name }};    /* {{ field.description | default('') }} */
{% endfor %}
} {{ structName(serviceName, method.name, 'Response') }}_t;

{% endfor %}

/* ==================== Serialization Functions ==================== */
{% for method in methods %}
/**
 * Serialize {{ method.name }} request to msgpack
 */
int {{ functionName(serviceName, method.name, 'SerializeRequest') }}(
    const {{ structName(serviceName, method.name, 'Request') }}_t* request,
    uint8_t** output,
    size_t* output_size
);

/**
 * Deserialize msgpack to {{ method.name }} request
 */
int {{ functionName(serviceName, method.name, 'DeserializeRequest') }}(
    const uint8_t* data,
    size_t size,
    {{ structName(serviceName, method.name, 'Request') }}_t* request
);

/**
 * Serialize {{ method.name }} response to msgpack
 */
int {{ functionName(serviceName, method.name, 'SerializeResponse') }}(
    const {{ structName(serviceName, method.name, 'Response') }}_t* response,
    uint8_t** output,
    size_t* output_size
);

/**
 * Deserialize msgpack to {{ method.name }} response
 */
int {{ functionName(serviceName, method.name, 'DeserializeResponse') }}(
    const uint8_t* data,
    size_t size,
    {{ structName(serviceName, method.name, 'Response') }}_t* response
);

{% endfor %}

/* ==================== Free Functions ==================== */
{% for method in methods %}
/**
 * Free {{ method.name }} request memory
 */
void {{ functionName(serviceName, method.name, 'FreeRequest') }}(
    {{ structName(serviceName, method.name, 'Request') }}_t* request
);

/**
 * Free {{ method.name }} response memory
 */
void {{ functionName(serviceName, method.name, 'FreeResponse') }}(
    {{ structName(serviceName, method.name, 'Response') }}_t* response
);

{% endfor %}

#ifdef __cplusplus
}
#endif

#endif /* {{ headerGuard }} */