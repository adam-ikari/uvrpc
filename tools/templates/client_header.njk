/**
 * Auto-generated client header file for {{ serviceName }}
 * Generated from {{ yamlPath }}
 * Do not edit this file manually
 */

#ifndef {{ headerGuard }}_CLIENT
#define {{ headerGuard }}_CLIENT

#ifdef __cplusplus
extern "C" {
#endif

#include "{{ serviceName | lower }}_gen.h"
#include "uvrpc.h"

/* ==================== Async API Functions ==================== */
{% for method in methods %}

/**
 * Async call to {{ method.name }}
 * 
 * @param client UVRPC client instance
 * @param request {{ method.name }} request structure
 * @param async Async context (created by uvrpc_async_create)
 * @return UVRPC_OK on success, error code on failure
 * 
 * Usage:
 *   uvrpc_async_t* async = uvrpc_async_create(loop);
 *   {{ functionName(serviceName, method.name, 'Async') }}(client, &request, async);
 *   const uvrpc_async_result_t* result = uvrpc_async_await(async);
 *   // process result
 *   uvrpc_async_free(async);
 */
int {{ functionName(serviceName, method.name, 'Async') }}(
    uvrpc_client_t* client,
    const {{ structName(serviceName, method.name, 'Request') }}_t* request,
    uvrpc_async_t* async
);

/**
 * Async call to {{ method.name }} with timeout
 * 
 * @param client UVRPC client instance
 * @param request {{ method.name }} request structure
 * @param async Async context
 * @param timeout_ms Timeout in milliseconds
 * @return UVRPC_OK on success, error code on failure
 */
int {{ functionName(serviceName, method.name, 'AsyncTimeout') }}(
    uvrpc_client_t* client,
    const {{ structName(serviceName, method.name, 'Request') }}_t* request,
    uvrpc_async_t* async,
    uint64_t timeout_ms
);

/**
 * Await {{ method.name }} response
 * 
 * @param async Async context
 * @param response Output {{ method.name }} response structure
 * @return UVRPC_OK on success, error code on failure
 * 
 * This function fills the response structure from async result.
 * Caller is responsible for calling {{ functionName(serviceName, method.name, 'FreeResponse') }}.
 */
int {{ functionName(serviceName, method.name, 'Await') }}(
    const uvrpc_async_result_t* result,
    {{ structName(serviceName, method.name, 'Response') }}_t* response
);

/**
 * Complete async call to {{ method.name }}
 * 
 * This is a convenience function that combines Async and Await.
 * 
 * @param client UVRPC client instance
 * @param request {{ method.name }} request structure
 * @param response Output {{ method.name }} response structure
 * @param loop libuv event loop
 * @return UVRPC_OK on success, error code on failure
 * 
 * Usage:
 *   {{ functionName(serviceName, method.name, 'CallAsync') }}(client, &request, &response, loop);
 *   // process response
 *   {{ functionName(serviceName, method.name, 'FreeResponse') }}(&response);
 */
int {{ functionName(serviceName, method.name, 'CallAsync') }}(
    uvrpc_client_t* client,
    const {{ structName(serviceName, method.name, 'Request') }}_t* request,
    {{ structName(serviceName, method.name, 'Response') }}_t* response,
    uv_loop_t* loop
);

{% endfor %}

#ifdef __cplusplus
}
#endif

#endif /* {{ headerGuard }}_CLIENT */