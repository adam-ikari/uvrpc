<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UVRPC: Server API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UVRPC<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">Ultra-Fast RPC Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Server API</div></div>
</div><!--header-->
<div class="contents">

<p>Functions for creating and managing UVRPC servers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaedf61695a733f65ee8f7eb6cdcbcb84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#gaaedf61695a733f65ee8f7eb6cdcbcb84">uvrpc_response_send</a> (<a class="el" href="uvrpc_8h.html#af5858d287dc6d6e22d3f8dd717fd29c8">uvrpc_request_t</a> *req, const uint8_t *result, size_t result_size)</td></tr>
<tr class="memdesc:gaaedf61695a733f65ee8f7eb6cdcbcb84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a response to a request.  <a href="group__ServerAPI.html#gaaedf61695a733f65ee8f7eb6cdcbcb84">More...</a><br /></td></tr>
<tr class="separator:gaaedf61695a733f65ee8f7eb6cdcbcb84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad13091e2b3b268255a7edf22f41d167d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#gad13091e2b3b268255a7edf22f41d167d">uvrpc_response_send_error</a> (<a class="el" href="uvrpc_8h.html#af5858d287dc6d6e22d3f8dd717fd29c8">uvrpc_request_t</a> *req, int32_t error_code, const char *error_message)</td></tr>
<tr class="memdesc:gad13091e2b3b268255a7edf22f41d167d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an error response to a request.  <a href="group__ServerAPI.html#gad13091e2b3b268255a7edf22f41d167d">More...</a><br /></td></tr>
<tr class="separator:gad13091e2b3b268255a7edf22f41d167d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87bd379c5e75d0fc0e1a4857cc53482a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#ga87bd379c5e75d0fc0e1a4857cc53482a">uvrpc_server_create</a> (<a class="el" href="uvrpc_8h.html#a877e55a4f9d0b9b7ee1e89e1f5155c75">uvrpc_config_t</a> *config)</td></tr>
<tr class="memdesc:ga87bd379c5e75d0fc0e1a4857cc53482a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new RPC server.  <a href="group__ServerAPI.html#ga87bd379c5e75d0fc0e1a4857cc53482a">More...</a><br /></td></tr>
<tr class="separator:ga87bd379c5e75d0fc0e1a4857cc53482a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7212ee2594ccf211aaa70633a23fbc65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#ga7212ee2594ccf211aaa70633a23fbc65">uvrpc_server_free</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server)</td></tr>
<tr class="memdesc:ga7212ee2594ccf211aaa70633a23fbc65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the server.  <a href="group__ServerAPI.html#ga7212ee2594ccf211aaa70633a23fbc65">More...</a><br /></td></tr>
<tr class="separator:ga7212ee2594ccf211aaa70633a23fbc65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a584b68b5128541828eeb57e527a0b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uvrpc_8h.html#a1267360dffceedbb9a190699dbe91c52">uvrpc_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#ga5a584b68b5128541828eeb57e527a0b6">uvrpc_server_get_context</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server)</td></tr>
<tr class="memdesc:ga5a584b68b5128541828eeb57e527a0b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get server context.  <a href="group__ServerAPI.html#ga5a584b68b5128541828eeb57e527a0b6">More...</a><br /></td></tr>
<tr class="separator:ga5a584b68b5128541828eeb57e527a0b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa23f24c364aa1174d1791926433a1fb0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#gaa23f24c364aa1174d1791926433a1fb0">uvrpc_server_get_total_requests</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server)</td></tr>
<tr class="memdesc:gaa23f24c364aa1174d1791926433a1fb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total requests received.  <a href="group__ServerAPI.html#gaa23f24c364aa1174d1791926433a1fb0">More...</a><br /></td></tr>
<tr class="separator:gaa23f24c364aa1174d1791926433a1fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0db659101ae7ed222dbf760b19bf42db"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#ga0db659101ae7ed222dbf760b19bf42db">uvrpc_server_get_total_responses</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server)</td></tr>
<tr class="memdesc:ga0db659101ae7ed222dbf760b19bf42db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total responses sent.  <a href="group__ServerAPI.html#ga0db659101ae7ed222dbf760b19bf42db">More...</a><br /></td></tr>
<tr class="separator:ga0db659101ae7ed222dbf760b19bf42db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb0b4c350e56c93909067ea12d1cefa9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#gafb0b4c350e56c93909067ea12d1cefa9">uvrpc_server_register</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server, const char *method, <a class="el" href="uvrpc_8h.html#ad44acde8ec79ff9da45d213a32ccca12">uvrpc_handler_t</a> handler, void *ctx)</td></tr>
<tr class="memdesc:gafb0b4c350e56c93909067ea12d1cefa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a method handler.  <a href="group__ServerAPI.html#gafb0b4c350e56c93909067ea12d1cefa9">More...</a><br /></td></tr>
<tr class="separator:gafb0b4c350e56c93909067ea12d1cefa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1d0a24ea024d981d8f8e4b806a5709b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#gad1d0a24ea024d981d8f8e4b806a5709b">uvrpc_server_set_context</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server, <a class="el" href="uvrpc_8h.html#a1267360dffceedbb9a190699dbe91c52">uvrpc_context_t</a> *ctx)</td></tr>
<tr class="memdesc:gad1d0a24ea024d981d8f8e4b806a5709b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set server context.  <a href="group__ServerAPI.html#gad1d0a24ea024d981d8f8e4b806a5709b">More...</a><br /></td></tr>
<tr class="separator:gad1d0a24ea024d981d8f8e4b806a5709b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga209b5f9a4a5635b21ee8ae5c64b8c674"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#ga209b5f9a4a5635b21ee8ae5c64b8c674">uvrpc_server_start</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server)</td></tr>
<tr class="memdesc:ga209b5f9a4a5635b21ee8ae5c64b8c674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the server.  <a href="group__ServerAPI.html#ga209b5f9a4a5635b21ee8ae5c64b8c674">More...</a><br /></td></tr>
<tr class="separator:ga209b5f9a4a5635b21ee8ae5c64b8c674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga954fca340a3edce50c5279eec20e053d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerAPI.html#ga954fca340a3edce50c5279eec20e053d">uvrpc_server_stop</a> (<a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *server)</td></tr>
<tr class="memdesc:ga954fca340a3edce50c5279eec20e053d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the server.  <a href="group__ServerAPI.html#ga954fca340a3edce50c5279eec20e053d">More...</a><br /></td></tr>
<tr class="separator:ga954fca340a3edce50c5279eec20e053d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Functions for creating and managing UVRPC servers. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaaedf61695a733f65ee8f7eb6cdcbcb84" name="gaaedf61695a733f65ee8f7eb6cdcbcb84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaedf61695a733f65ee8f7eb6cdcbcb84">&#9670;&nbsp;</a></span>uvrpc_response_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvrpc_response_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af5858d287dc6d6e22d3f8dd717fd29c8">uvrpc_request_t</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>result_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a response to a request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Request object </td></tr>
    <tr><td class="paramname">result</td><td>Response data </td></tr>
    <tr><td class="paramname">result_size</td><td>Size of response data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>UVRPC_OK on success, error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00390">390</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  390</span>                                                                                         {</div>
<div class="line"><span class="lineno">  391</span>    <span class="keywordflow">if</span> (!req || !req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">server</a> || !req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab00cd1132bee8f43cb6375967a8722f1">client_ctx</a>) {</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d">UVRPC_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno">  393</span>    }</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>    <span class="comment">/* Encode response */</span></div>
<div class="line"><span class="lineno">  396</span>    uint8_t* response_data;</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordtype">size_t</span> response_size;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="uvrpc__flatbuffers_8c.html#a978c34d8fcb3413cca2f439364f654b3">uvrpc_encode_response</a>(req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#a56372cc79bb92ead4f81487125f8f204">msgid</a>, result, result_size,</div>
<div class="line"><span class="lineno">  400</span>                              &amp;response_data, &amp;response_size) != <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>) {</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00">UVRPC_ERROR_TRANSPORT</a>;</div>
<div class="line"><span class="lineno">  402</span>    }</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <span class="comment">/* Send response via UVBus */</span></div>
<div class="line"><span class="lineno">  405</span>    <a class="code hl_struct" href="structuvbus.html">uvbus_t</a>* <a class="code hl_struct" href="structuvbus.html">uvbus</a> = req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">server</a>-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>;</div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_enumeration" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59">uvbus_error_t</a> err = <a class="code hl_function" href="uvbus_8h.html#ab2065c287bb4a964378c0a53d8803475">uvbus_send_to</a>(<a class="code hl_struct" href="structuvbus.html">uvbus</a>, response_data, </div>
<div class="line"><span class="lineno">  407</span>                                       response_size, req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab00cd1132bee8f43cb6375967a8722f1">client_ctx</a>);</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>    <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(response_data);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59a3597b5536b36c9678593c04d1619ff4b">UVBUS_OK</a>) {</div>
<div class="line"><span class="lineno">  412</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00">UVRPC_ERROR_TRANSPORT</a>;</div>
<div class="line"><span class="lineno">  413</span>    }</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>    req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">server</a>-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a215d2edd99a588ec00ec4d22a0f19ca3">total_responses</a>++;</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>;</div>
<div class="line"><span class="lineno">  417</span>}</div>
<div class="ttc" id="agroup__AllocatorAPI_html_ga067f00c05f4a005dae8fc92d39875de4"><div class="ttname"><a href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a></div><div class="ttdeci">void uvrpc_free(void *ptr)</div><div class="ttdoc">Free memory.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__allocator_8c_source.html#l00170">uvrpc_allocator.c:170</a></div></div>
<div class="ttc" id="astructuvbus_html"><div class="ttname"><a href="structuvbus.html">uvbus</a></div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00176">uvbus.h:176</a></div></div>
<div class="ttc" id="astructuvrpc__request_html_a56372cc79bb92ead4f81487125f8f204"><div class="ttname"><a href="structuvrpc__request.html#a56372cc79bb92ead4f81487125f8f204">uvrpc_request::msgid</a></div><div class="ttdeci">uint32_t msgid</div><div class="ttdoc">Message ID for request-response matching.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00279">uvrpc.h:279</a></div></div>
<div class="ttc" id="astructuvrpc__request_html_ab00cd1132bee8f43cb6375967a8722f1"><div class="ttname"><a href="structuvrpc__request.html#ab00cd1132bee8f43cb6375967a8722f1">uvrpc_request::client_ctx</a></div><div class="ttdeci">void * client_ctx</div><div class="ttdoc">Client context for sending response (from UVBus)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00283">uvrpc.h:283</a></div></div>
<div class="ttc" id="astructuvrpc__request_html_ab7d17dcc262d677a079186884de12c9c"><div class="ttname"><a href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">uvrpc_request::server</a></div><div class="ttdeci">uvrpc_server_t * server</div><div class="ttdoc">Server instance.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00278">uvrpc.h:278</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_a215d2edd99a588ec00ec4d22a0f19ca3"><div class="ttname"><a href="structuvrpc__server.html#a215d2edd99a588ec00ec4d22a0f19ca3">uvrpc_server::total_responses</a></div><div class="ttdeci">uint64_t total_responses</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00067">uvrpc_server.c:67</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_a6b4dcf26ce80972b56d4b5aa5651d0b4"><div class="ttname"><a href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvrpc_server::uvbus</a></div><div class="ttdeci">uvbus_t * uvbus</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00053">uvrpc_server.c:53</a></div></div>
<div class="ttc" id="auvbus_8h_html_ab2065c287bb4a964378c0a53d8803475"><div class="ttname"><a href="uvbus_8h.html#ab2065c287bb4a964378c0a53d8803475">uvbus_send_to</a></div><div class="ttdeci">uvbus_error_t uvbus_send_to(uvbus_t *bus, const uint8_t *data, size_t size, void *client)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00242">uvbus.c:242</a></div></div>
<div class="ttc" id="auvbus_8h_html_ae709b2472bc33f6d34b6612fef049b59"><div class="ttname"><a href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59">uvbus_error_t</a></div><div class="ttdeci">uvbus_error_t</div><div class="ttdoc">UVBus error codes.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00038">uvbus.h:38</a></div></div>
<div class="ttc" id="auvbus_8h_html_ae709b2472bc33f6d34b6612fef049b59a3597b5536b36c9678593c04d1619ff4b"><div class="ttname"><a href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59a3597b5536b36c9678593c04d1619ff4b">UVBUS_OK</a></div><div class="ttdeci">@ UVBUS_OK</div><div class="ttdoc">Operation successful.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00039">uvbus.h:39</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d"><div class="ttname"><a href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d">UVRPC_ERROR_INVALID_PARAM</a></div><div class="ttdeci">@ UVRPC_ERROR_INVALID_PARAM</div><div class="ttdoc">Invalid parameter provided.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00045">uvrpc.h:45</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1"><div class="ttname"><a href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a></div><div class="ttdeci">@ UVRPC_OK</div><div class="ttdoc">Operation successful.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00043">uvrpc.h:43</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00"><div class="ttname"><a href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00">UVRPC_ERROR_TRANSPORT</a></div><div class="ttdeci">@ UVRPC_ERROR_TRANSPORT</div><div class="ttdoc">Transport layer error.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00049">uvrpc.h:49</a></div></div>
<div class="ttc" id="auvrpc__flatbuffers_8c_html_a978c34d8fcb3413cca2f439364f654b3"><div class="ttname"><a href="uvrpc__flatbuffers_8c.html#a978c34d8fcb3413cca2f439364f654b3">uvrpc_encode_response</a></div><div class="ttdeci">int uvrpc_encode_response(uint32_t msgid, const uint8_t *result, size_t result_size, uint8_t **out_data, size_t *out_size)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__flatbuffers_8c_source.html#l00047">uvrpc_flatbuffers.c:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc_8h_source.html#l00283">uvrpc_request::client_ctx</a>, <a class="el" href="uvrpc_8h_source.html#l00279">uvrpc_request::msgid</a>, <a class="el" href="uvrpc_8h_source.html#l00278">uvrpc_request::server</a>, <a class="el" href="uvrpc__server_8c_source.html#l00067">uvrpc_server::total_responses</a>, <a class="el" href="uvrpc__server_8c_source.html#l00053">uvrpc_server::uvbus</a>, <a class="el" href="uvbus_8h_source.html#l00039">UVBUS_OK</a>, <a class="el" href="uvbus_8c_source.html#l00242">uvbus_send_to()</a>, <a class="el" href="uvrpc__flatbuffers_8c_source.html#l00047">uvrpc_encode_response()</a>, <a class="el" href="uvrpc_8h_source.html#l00045">UVRPC_ERROR_INVALID_PARAM</a>, <a class="el" href="uvrpc_8h_source.html#l00049">UVRPC_ERROR_TRANSPORT</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00170">uvrpc_free()</a>, and <a class="el" href="uvrpc_8h_source.html#l00043">UVRPC_OK</a>.</p>

</div>
</div>
<a id="gad13091e2b3b268255a7edf22f41d167d" name="gad13091e2b3b268255a7edf22f41d167d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad13091e2b3b268255a7edf22f41d167d">&#9670;&nbsp;</a></span>uvrpc_response_send_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvrpc_response_send_error </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af5858d287dc6d6e22d3f8dd717fd29c8">uvrpc_request_t</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>error_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>error_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an error response to a request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Request object </td></tr>
    <tr><td class="paramname">error_code</td><td>RPC error code </td></tr>
    <tr><td class="paramname">error_message</td><td>Error message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>UVRPC_OK on success, error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00420">420</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>                                                                                                   {</div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">if</span> (!req || !req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">server</a> || !req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab00cd1132bee8f43cb6375967a8722f1">client_ctx</a>) {</div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d">UVRPC_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno">  423</span>    }</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">/* Encode error response */</span></div>
<div class="line"><span class="lineno">  426</span>    uint8_t* response_data;</div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordtype">size_t</span> response_size;</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="uvrpc__flatbuffers_8c.html#a041eebfa6429de1ec7e035a53cb14e59">uvrpc_encode_error</a>(req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#a56372cc79bb92ead4f81487125f8f204">msgid</a>, error_code, error_message,</div>
<div class="line"><span class="lineno">  430</span>                           &amp;response_data, &amp;response_size) != <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>) {</div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00">UVRPC_ERROR_TRANSPORT</a>;</div>
<div class="line"><span class="lineno">  432</span>    }</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="comment">/* Send response via UVBus */</span></div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_struct" href="structuvbus.html">uvbus_t</a>* <a class="code hl_struct" href="structuvbus.html">uvbus</a> = req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">server</a>-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>;</div>
<div class="line"><span class="lineno">  436</span>    <a class="code hl_enumeration" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59">uvbus_error_t</a> err = <a class="code hl_function" href="uvbus_8h.html#ab2065c287bb4a964378c0a53d8803475">uvbus_send_to</a>(<a class="code hl_struct" href="structuvbus.html">uvbus</a>, response_data, </div>
<div class="line"><span class="lineno">  437</span>                                       response_size, req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab00cd1132bee8f43cb6375967a8722f1">client_ctx</a>);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>    <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(response_data);</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59a3597b5536b36c9678593c04d1619ff4b">UVBUS_OK</a>) {</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00">UVRPC_ERROR_TRANSPORT</a>;</div>
<div class="line"><span class="lineno">  443</span>    }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>    req-&gt;<a class="code hl_variable" href="structuvrpc__request.html#ab7d17dcc262d677a079186884de12c9c">server</a>-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a215d2edd99a588ec00ec4d22a0f19ca3">total_responses</a>++;</div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>;</div>
<div class="line"><span class="lineno">  447</span>}</div>
<div class="ttc" id="auvrpc__flatbuffers_8c_html_a041eebfa6429de1ec7e035a53cb14e59"><div class="ttname"><a href="uvrpc__flatbuffers_8c.html#a041eebfa6429de1ec7e035a53cb14e59">uvrpc_encode_error</a></div><div class="ttdeci">int uvrpc_encode_error(uint32_t msgid, int32_t error_code, const char *error_message, uint8_t **out_data, size_t *out_size)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__flatbuffers_8c_source.html#l00138">uvrpc_flatbuffers.c:138</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc_8h_source.html#l00283">uvrpc_request::client_ctx</a>, <a class="el" href="uvrpc_8h_source.html#l00279">uvrpc_request::msgid</a>, <a class="el" href="uvrpc_8h_source.html#l00278">uvrpc_request::server</a>, <a class="el" href="uvrpc__server_8c_source.html#l00067">uvrpc_server::total_responses</a>, <a class="el" href="uvrpc__server_8c_source.html#l00053">uvrpc_server::uvbus</a>, <a class="el" href="uvbus_8h_source.html#l00039">UVBUS_OK</a>, <a class="el" href="uvbus_8c_source.html#l00242">uvbus_send_to()</a>, <a class="el" href="uvrpc__flatbuffers_8c_source.html#l00138">uvrpc_encode_error()</a>, <a class="el" href="uvrpc_8h_source.html#l00045">UVRPC_ERROR_INVALID_PARAM</a>, <a class="el" href="uvrpc_8h_source.html#l00049">UVRPC_ERROR_TRANSPORT</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00170">uvrpc_free()</a>, and <a class="el" href="uvrpc_8h_source.html#l00043">UVRPC_OK</a>.</p>

</div>
</div>
<a id="ga87bd379c5e75d0fc0e1a4857cc53482a" name="ga87bd379c5e75d0fc0e1a4857cc53482a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87bd379c5e75d0fc0e1a4857cc53482a">&#9670;&nbsp;</a></span>uvrpc_server_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> * uvrpc_server_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#a877e55a4f9d0b9b7ee1e89e1f5155c75">uvrpc_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new RPC server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Configuration structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New server instance, or NULL on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00154">154</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  154</span>                                                            {</div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">if</span> (!config || !config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a0e9c705f4f4839489f5f10b4e376000f">loop</a> || !config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a5ffafbc8108634285d979f65ac18a123">address</a>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  156</span>    </div>
<div class="line"><span class="lineno">  157</span>    <a class="code hl_struct" href="structuvrpc__server.html">uvrpc_server_t</a>* server = <a class="code hl_function" href="group__AllocatorAPI.html#ga91fe7dfcd5db69a938f8e8e9291677ae">uvrpc_calloc</a>(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structuvrpc__server.html">uvrpc_server_t</a>));</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> (!server) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a41c1d4c71bd50702df7e12e3b2069293">loop</a> = config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a0e9c705f4f4839489f5f10b4e376000f">loop</a>;</div>
<div class="line"><span class="lineno">  161</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a> = <a class="code hl_function" href="group__AllocatorAPI.html#ga73a86be88aff6f12142368fced3605f2">uvrpc_strdup</a>(config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a5ffafbc8108634285d979f65ac18a123">address</a>);</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> (!server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>) {</div>
<div class="line"><span class="lineno">  163</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server);</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  165</span>    }</div>
<div class="line"><span class="lineno">  166</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a205ffe44a50d980833e9d8128cbc9ad6">handlers</a> = NULL;</div>
<div class="line"><span class="lineno">  167</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#abbda7b8eea00aad2c89b243e250fdabb">is_running</a> = 0;</div>
<div class="line"><span class="lineno">  168</span>    </div>
<div class="line"><span class="lineno">  169</span>    <span class="comment">/* Initialize ring buffer */</span></div>
<div class="line"><span class="lineno">  170</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#adb5663edacd9c3eaaaca92fd88172ddc">max_pending_requests</a> = (config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a5188e2a5e631a85cc8bbe61648e7692a">max_pending_callbacks</a> &gt; 0) ? </div>
<div class="line"><span class="lineno">  171</span>                                   config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a5188e2a5e631a85cc8bbe61648e7692a">max_pending_callbacks</a> : UVRPC_MAX_PENDING_CALLBACKS;</div>
<div class="line"><span class="lineno">  172</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#af578d1cd66d60388d1a2335449bcdd42">generation</a> = 0;</div>
<div class="line"><span class="lineno">  173</span>    </div>
<div class="line"><span class="lineno">  174</span>    <span class="comment">/* Allocate ring buffer array */</span></div>
<div class="line"><span class="lineno">  175</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a> = (<a class="code hl_struct" href="structpending__request.html">pending_request_t</a>**)<a class="code hl_function" href="group__AllocatorAPI.html#ga91fe7dfcd5db69a938f8e8e9291677ae">uvrpc_calloc</a>(</div>
<div class="line"><span class="lineno">  176</span>        server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#adb5663edacd9c3eaaaca92fd88172ddc">max_pending_requests</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpending__request.html">pending_request_t</a>*));</div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> (!server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>) {</div>
<div class="line"><span class="lineno">  178</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  179</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server);</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="comment">/* Create UVBus configuration */</span></div>
<div class="line"><span class="lineno">  184</span>    <a class="code hl_struct" href="structuvbus__config.html">uvbus_config_t</a>* bus_config = <a class="code hl_function" href="uvbus_8h.html#afdf4cbd411257359186f6a842a7ca881">uvbus_config_new</a>();</div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">if</span> (!bus_config) {</div>
<div class="line"><span class="lineno">  186</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>);</div>
<div class="line"><span class="lineno">  187</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  188</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server);</div>
<div class="line"><span class="lineno">  189</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  190</span>    }</div>
<div class="line"><span class="lineno">  191</span>    </div>
<div class="line"><span class="lineno">  192</span>    <a class="code hl_function" href="uvbus_8h.html#afd32cbd35cc2efd347230ec84a45394d">uvbus_config_set_loop</a>(bus_config, config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#a0e9c705f4f4839489f5f10b4e376000f">loop</a>);</div>
<div class="line"><span class="lineno">  193</span>    </div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">/* Map UVRPC transport type to UVBus transport type */</span></div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_enumeration" href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4">uvbus_transport_type_t</a> uvbus_type;</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">switch</span> (config-&gt;<a class="code hl_variable" href="structuvrpc__config.html#acc786c1fa413b85b98d4bec8b5588cd5">transport</a>) {</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7bafa95848482679ed4981d16726319153c">UVRPC_TRANSPORT_TCP</a>:</div>
<div class="line"><span class="lineno">  198</span>            uvbus_type = <a class="code hl_enumvalue" href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4a9c42979b8c6be712ecd3e1d4bbbb2929">UVBUS_TRANSPORT_TCP</a>;</div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  200</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7ba1b0bad5d510a23c2802aa5e6e10dbd29">UVRPC_TRANSPORT_UDP</a>:</div>
<div class="line"><span class="lineno">  201</span>            uvbus_type = <a class="code hl_enumvalue" href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4a5145f149a72cb6852239565bb17ebbf3">UVBUS_TRANSPORT_UDP</a>;</div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  203</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7ba99eafd1eec9dd37033b0b0b471d7df5b">UVRPC_TRANSPORT_IPC</a>:</div>
<div class="line"><span class="lineno">  204</span>            uvbus_type = <a class="code hl_enumvalue" href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4aa1a32cd0ebf514c9c80f5966b5fb0661">UVBUS_TRANSPORT_IPC</a>;</div>
<div class="line"><span class="lineno">  205</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  206</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7baafd7624f7284f780db438f158d79d6ce">UVRPC_TRANSPORT_INPROC</a>:</div>
<div class="line"><span class="lineno">  207</span>            uvbus_type = <a class="code hl_enumvalue" href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4ae0eed2476e4cd226e7550ce7c9c69fcd">UVBUS_TRANSPORT_INPROC</a>;</div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  209</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  210</span>            <a class="code hl_function" href="uvbus_8h.html#ac2cd04e3243086f112110710434227f0">uvbus_config_free</a>(bus_config);</div>
<div class="line"><span class="lineno">  211</span>            <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>);</div>
<div class="line"><span class="lineno">  212</span>            <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  213</span>            <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server);</div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  215</span>    }</div>
<div class="line"><span class="lineno">  216</span>    </div>
<div class="line"><span class="lineno">  217</span>    <a class="code hl_function" href="uvbus_8h.html#aa61fe1a2bad717d81e2c07baf8823c28">uvbus_config_set_transport</a>(bus_config, uvbus_type);</div>
<div class="line"><span class="lineno">  218</span>    <a class="code hl_function" href="uvbus_8h.html#a710a8ee1b3c23442a5e1d379406c8af9">uvbus_config_set_address</a>(bus_config, server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  219</span>    </div>
<div class="line"><span class="lineno">  220</span>    <span class="comment">/* Set up receive callback */</span></div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_function" href="uvbus_8h.html#a1bcbc82ae667fa41e4eac2869c698643">uvbus_config_set_recv_callback</a>(bus_config, <a class="code hl_function" href="uvrpc__server_8c.html#a9e8c6421db7ec54074b7ca2ccadfcc92">server_recv_callback</a>, server);</div>
<div class="line"><span class="lineno">  222</span>    </div>
<div class="line"><span class="lineno">  223</span>    <span class="comment">/* Create UVBus server */</span></div>
<div class="line"><span class="lineno">  224</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a> = <a class="code hl_function" href="uvbus_8h.html#ada15a768df6c8f95930ccda8228ee2c3">uvbus_server_new</a>(bus_config);</div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">if</span> (!server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>) {</div>
<div class="line"><span class="lineno">  226</span>        <a class="code hl_function" href="uvbus_8h.html#ac2cd04e3243086f112110710434227f0">uvbus_config_free</a>(bus_config);</div>
<div class="line"><span class="lineno">  227</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>);</div>
<div class="line"><span class="lineno">  228</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  229</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server);</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  231</span>    }</div>
<div class="line"><span class="lineno">  232</span>    </div>
<div class="line"><span class="lineno">  233</span>    <a class="code hl_function" href="uvbus_8h.html#ac2cd04e3243086f112110710434227f0">uvbus_config_free</a>(bus_config);</div>
<div class="line"><span class="lineno">  234</span>    </div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">return</span> server;</div>
<div class="line"><span class="lineno">  236</span>}</div>
<div class="ttc" id="agroup__AllocatorAPI_html_ga73a86be88aff6f12142368fced3605f2"><div class="ttname"><a href="group__AllocatorAPI.html#ga73a86be88aff6f12142368fced3605f2">uvrpc_strdup</a></div><div class="ttdeci">char * uvrpc_strdup(const char *s)</div><div class="ttdoc">Duplicate a string.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__allocator_8c_source.html#l00199">uvrpc_allocator.c:199</a></div></div>
<div class="ttc" id="agroup__AllocatorAPI_html_ga91fe7dfcd5db69a938f8e8e9291677ae"><div class="ttname"><a href="group__AllocatorAPI.html#ga91fe7dfcd5db69a938f8e8e9291677ae">uvrpc_calloc</a></div><div class="ttdeci">void * uvrpc_calloc(size_t count, size_t size)</div><div class="ttdoc">Allocate zero-initialized memory.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__allocator_8c_source.html#l00134">uvrpc_allocator.c:134</a></div></div>
<div class="ttc" id="astructpending__request_html"><div class="ttname"><a href="structpending__request.html">pending_request</a></div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00042">uvrpc_server.c:42</a></div></div>
<div class="ttc" id="astructuvbus__config_html"><div class="ttname"><a href="structuvbus__config.html">uvbus_config</a></div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00122">uvbus.h:122</a></div></div>
<div class="ttc" id="astructuvrpc__config_html_a0e9c705f4f4839489f5f10b4e376000f"><div class="ttname"><a href="structuvrpc__config.html#a0e9c705f4f4839489f5f10b4e376000f">uvrpc_config::loop</a></div><div class="ttdeci">uv_loop_t * loop</div><div class="ttdoc">libuv event loop (required)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00259">uvrpc.h:259</a></div></div>
<div class="ttc" id="astructuvrpc__config_html_a5188e2a5e631a85cc8bbe61648e7692a"><div class="ttname"><a href="structuvrpc__config.html#a5188e2a5e631a85cc8bbe61648e7692a">uvrpc_config::max_pending_callbacks</a></div><div class="ttdeci">int max_pending_callbacks</div><div class="ttdoc">Max pending callbacks in ring buffer (default: UVRPC_MAX_PENDING_CALLBACKS)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00266">uvrpc.h:266</a></div></div>
<div class="ttc" id="astructuvrpc__config_html_a5ffafbc8108634285d979f65ac18a123"><div class="ttname"><a href="structuvrpc__config.html#a5ffafbc8108634285d979f65ac18a123">uvrpc_config::address</a></div><div class="ttdeci">char * address</div><div class="ttdoc">Server or client address (required)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00260">uvrpc.h:260</a></div></div>
<div class="ttc" id="astructuvrpc__config_html_acc786c1fa413b85b98d4bec8b5588cd5"><div class="ttname"><a href="structuvrpc__config.html#acc786c1fa413b85b98d4bec8b5588cd5">uvrpc_config::transport</a></div><div class="ttdeci">uvrpc_transport_type transport</div><div class="ttdoc">Transport type (TCP/UDP/IPC/INPROC)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00261">uvrpc.h:261</a></div></div>
<div class="ttc" id="astructuvrpc__server_html"><div class="ttname"><a href="structuvrpc__server.html">uvrpc_server</a></div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00050">uvrpc_server.c:50</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_a205ffe44a50d980833e9d8128cbc9ad6"><div class="ttname"><a href="structuvrpc__server.html#a205ffe44a50d980833e9d8128cbc9ad6">uvrpc_server::handlers</a></div><div class="ttdeci">handler_entry_t * handlers</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00054">uvrpc_server.c:54</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_a2521699688fc695d8b6299897e5a089c"><div class="ttname"><a href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">uvrpc_server::pending_requests</a></div><div class="ttdeci">pending_request_t ** pending_requests</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00061">uvrpc_server.c:61</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_a41c1d4c71bd50702df7e12e3b2069293"><div class="ttname"><a href="structuvrpc__server.html#a41c1d4c71bd50702df7e12e3b2069293">uvrpc_server::loop</a></div><div class="ttdeci">uv_loop_t * loop</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00051">uvrpc_server.c:51</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_a7d75510a40989400da1d85b4dec43004"><div class="ttname"><a href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">uvrpc_server::address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00052">uvrpc_server.c:52</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_abbda7b8eea00aad2c89b243e250fdabb"><div class="ttname"><a href="structuvrpc__server.html#abbda7b8eea00aad2c89b243e250fdabb">uvrpc_server::is_running</a></div><div class="ttdeci">int is_running</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00055">uvrpc_server.c:55</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_adb5663edacd9c3eaaaca92fd88172ddc"><div class="ttname"><a href="structuvrpc__server.html#adb5663edacd9c3eaaaca92fd88172ddc">uvrpc_server::max_pending_requests</a></div><div class="ttdeci">int max_pending_requests</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00062">uvrpc_server.c:62</a></div></div>
<div class="ttc" id="astructuvrpc__server_html_af578d1cd66d60388d1a2335449bcdd42"><div class="ttname"><a href="structuvrpc__server.html#af578d1cd66d60388d1a2335449bcdd42">uvrpc_server::generation</a></div><div class="ttdeci">uint32_t generation</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00063">uvrpc_server.c:63</a></div></div>
<div class="ttc" id="auvbus_8h_html_a1bcbc82ae667fa41e4eac2869c698643"><div class="ttname"><a href="uvbus_8h.html#a1bcbc82ae667fa41e4eac2869c698643">uvbus_config_set_recv_callback</a></div><div class="ttdeci">void uvbus_config_set_recv_callback(uvbus_config_t *config, uvbus_recv_callback_t recv_cb, void *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00063">uvbus.c:63</a></div></div>
<div class="ttc" id="auvbus_8h_html_a710a8ee1b3c23442a5e1d379406c8af9"><div class="ttname"><a href="uvbus_8h.html#a710a8ee1b3c23442a5e1d379406c8af9">uvbus_config_set_address</a></div><div class="ttdeci">void uvbus_config_set_address(uvbus_config_t *config, const char *address)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00057">uvbus.c:57</a></div></div>
<div class="ttc" id="auvbus_8h_html_a793e1db1b4e704546608c6b1ee615fc4"><div class="ttname"><a href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4">uvbus_transport_type_t</a></div><div class="ttdeci">uvbus_transport_type_t</div><div class="ttdoc">UVBus transport types.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00057">uvbus.h:57</a></div></div>
<div class="ttc" id="auvbus_8h_html_a793e1db1b4e704546608c6b1ee615fc4a5145f149a72cb6852239565bb17ebbf3"><div class="ttname"><a href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4a5145f149a72cb6852239565bb17ebbf3">UVBUS_TRANSPORT_UDP</a></div><div class="ttdeci">@ UVBUS_TRANSPORT_UDP</div><div class="ttdoc">UDP transport.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00059">uvbus.h:59</a></div></div>
<div class="ttc" id="auvbus_8h_html_a793e1db1b4e704546608c6b1ee615fc4a9c42979b8c6be712ecd3e1d4bbbb2929"><div class="ttname"><a href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4a9c42979b8c6be712ecd3e1d4bbbb2929">UVBUS_TRANSPORT_TCP</a></div><div class="ttdeci">@ UVBUS_TRANSPORT_TCP</div><div class="ttdoc">TCP transport.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00058">uvbus.h:58</a></div></div>
<div class="ttc" id="auvbus_8h_html_a793e1db1b4e704546608c6b1ee615fc4aa1a32cd0ebf514c9c80f5966b5fb0661"><div class="ttname"><a href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4aa1a32cd0ebf514c9c80f5966b5fb0661">UVBUS_TRANSPORT_IPC</a></div><div class="ttdeci">@ UVBUS_TRANSPORT_IPC</div><div class="ttdoc">Unix domain socket (IPC)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00060">uvbus.h:60</a></div></div>
<div class="ttc" id="auvbus_8h_html_a793e1db1b4e704546608c6b1ee615fc4ae0eed2476e4cd226e7550ce7c9c69fcd"><div class="ttname"><a href="uvbus_8h.html#a793e1db1b4e704546608c6b1ee615fc4ae0eed2476e4cd226e7550ce7c9c69fcd">UVBUS_TRANSPORT_INPROC</a></div><div class="ttdeci">@ UVBUS_TRANSPORT_INPROC</div><div class="ttdoc">In-process transport.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00062">uvbus.h:61</a></div></div>
<div class="ttc" id="auvbus_8h_html_aa61fe1a2bad717d81e2c07baf8823c28"><div class="ttname"><a href="uvbus_8h.html#aa61fe1a2bad717d81e2c07baf8823c28">uvbus_config_set_transport</a></div><div class="ttdeci">void uvbus_config_set_transport(uvbus_config_t *config, uvbus_transport_type_t transport)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00051">uvbus.c:51</a></div></div>
<div class="ttc" id="auvbus_8h_html_ac2cd04e3243086f112110710434227f0"><div class="ttname"><a href="uvbus_8h.html#ac2cd04e3243086f112110710434227f0">uvbus_config_free</a></div><div class="ttdeci">void uvbus_config_free(uvbus_config_t *config)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00039">uvbus.c:39</a></div></div>
<div class="ttc" id="auvbus_8h_html_ada15a768df6c8f95930ccda8228ee2c3"><div class="ttname"><a href="uvbus_8h.html#ada15a768df6c8f95930ccda8228ee2c3">uvbus_server_new</a></div><div class="ttdeci">uvbus_t * uvbus_server_new(uvbus_config_t *config)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00118">uvbus.c:118</a></div></div>
<div class="ttc" id="auvbus_8h_html_afd32cbd35cc2efd347230ec84a45394d"><div class="ttname"><a href="uvbus_8h.html#afd32cbd35cc2efd347230ec84a45394d">uvbus_config_set_loop</a></div><div class="ttdeci">void uvbus_config_set_loop(uvbus_config_t *config, uv_loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00045">uvbus.c:45</a></div></div>
<div class="ttc" id="auvbus_8h_html_afdf4cbd411257359186f6a842a7ca881"><div class="ttname"><a href="uvbus_8h.html#afdf4cbd411257359186f6a842a7ca881">uvbus_config_new</a></div><div class="ttdeci">uvbus_config_t * uvbus_config_new(void)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00026">uvbus.c:26</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3773a28b44c0e71ec4a7874be719ee7ba1b0bad5d510a23c2802aa5e6e10dbd29"><div class="ttname"><a href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7ba1b0bad5d510a23c2802aa5e6e10dbd29">UVRPC_TRANSPORT_UDP</a></div><div class="ttdeci">@ UVRPC_TRANSPORT_UDP</div><div class="ttdoc">UDP transport (fast, connectionless)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00101">uvrpc.h:101</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3773a28b44c0e71ec4a7874be719ee7ba99eafd1eec9dd37033b0b0b471d7df5b"><div class="ttname"><a href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7ba99eafd1eec9dd37033b0b0b471d7df5b">UVRPC_TRANSPORT_IPC</a></div><div class="ttdeci">@ UVRPC_TRANSPORT_IPC</div><div class="ttdoc">Unix domain socket (IPC) for local communication.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00102">uvrpc.h:102</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3773a28b44c0e71ec4a7874be719ee7baafd7624f7284f780db438f158d79d6ce"><div class="ttname"><a href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7baafd7624f7284f780db438f158d79d6ce">UVRPC_TRANSPORT_INPROC</a></div><div class="ttdeci">@ UVRPC_TRANSPORT_INPROC</div><div class="ttdoc">In-process transport for same-process communication.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00104">uvrpc.h:103</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3773a28b44c0e71ec4a7874be719ee7bafa95848482679ed4981d16726319153c"><div class="ttname"><a href="uvrpc_8h.html#a3773a28b44c0e71ec4a7874be719ee7bafa95848482679ed4981d16726319153c">UVRPC_TRANSPORT_TCP</a></div><div class="ttdeci">@ UVRPC_TRANSPORT_TCP</div><div class="ttdoc">TCP network transport (reliable, connection-oriented)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00100">uvrpc.h:100</a></div></div>
<div class="ttc" id="auvrpc__server_8c_html_a9e8c6421db7ec54074b7ca2ccadfcc92"><div class="ttname"><a href="uvrpc__server_8c.html#a9e8c6421db7ec54074b7ca2ccadfcc92">server_recv_callback</a></div><div class="ttdeci">static void server_recv_callback(const uint8_t *data, size_t size, void *client_ctx, void *server_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00071">uvrpc_server.c:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc_8h_source.html#l00260">uvrpc_config::address</a>, <a class="el" href="uvrpc__server_8c_source.html#l00052">uvrpc_server::address</a>, <a class="el" href="uvrpc__server_8c_source.html#l00063">uvrpc_server::generation</a>, <a class="el" href="uvrpc__server_8c_source.html#l00054">uvrpc_server::handlers</a>, <a class="el" href="uvrpc__server_8c_source.html#l00055">uvrpc_server::is_running</a>, <a class="el" href="uvrpc_8h_source.html#l00259">uvrpc_config::loop</a>, <a class="el" href="uvrpc__server_8c_source.html#l00051">uvrpc_server::loop</a>, <a class="el" href="uvrpc_8h_source.html#l00266">uvrpc_config::max_pending_callbacks</a>, <a class="el" href="uvrpc__server_8c_source.html#l00062">uvrpc_server::max_pending_requests</a>, <a class="el" href="uvrpc__server_8c_source.html#l00061">uvrpc_server::pending_requests</a>, <a class="el" href="uvrpc__server_8c_source.html#l00071">server_recv_callback()</a>, <a class="el" href="uvrpc_8h_source.html#l00261">uvrpc_config::transport</a>, <a class="el" href="uvrpc__server_8c_source.html#l00053">uvrpc_server::uvbus</a>, <a class="el" href="uvbus_8c_source.html#l00039">uvbus_config_free()</a>, <a class="el" href="uvbus_8c_source.html#l00026">uvbus_config_new()</a>, <a class="el" href="uvbus_8c_source.html#l00057">uvbus_config_set_address()</a>, <a class="el" href="uvbus_8c_source.html#l00045">uvbus_config_set_loop()</a>, <a class="el" href="uvbus_8c_source.html#l00063">uvbus_config_set_recv_callback()</a>, <a class="el" href="uvbus_8c_source.html#l00051">uvbus_config_set_transport()</a>, <a class="el" href="uvbus_8c_source.html#l00118">uvbus_server_new()</a>, <a class="el" href="uvbus_8h_source.html#l00061">UVBUS_TRANSPORT_INPROC</a>, <a class="el" href="uvbus_8h_source.html#l00060">UVBUS_TRANSPORT_IPC</a>, <a class="el" href="uvbus_8h_source.html#l00058">UVBUS_TRANSPORT_TCP</a>, <a class="el" href="uvbus_8h_source.html#l00059">UVBUS_TRANSPORT_UDP</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00134">uvrpc_calloc()</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00170">uvrpc_free()</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00199">uvrpc_strdup()</a>, <a class="el" href="uvrpc_8h_source.html#l00103">UVRPC_TRANSPORT_INPROC</a>, <a class="el" href="uvrpc_8h_source.html#l00102">UVRPC_TRANSPORT_IPC</a>, <a class="el" href="uvrpc_8h_source.html#l00100">UVRPC_TRANSPORT_TCP</a>, and <a class="el" href="uvrpc_8h_source.html#l00101">UVRPC_TRANSPORT_UDP</a>.</p>

</div>
</div>
<a id="ga7212ee2594ccf211aaa70633a23fbc65" name="ga7212ee2594ccf211aaa70633a23fbc65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7212ee2594ccf211aaa70633a23fbc65">&#9670;&nbsp;</a></span>uvrpc_server_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uvrpc_server_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00274">274</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  274</span>                                               {</div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">if</span> (!server) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  276</span>    </div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_function" href="group__ServerAPI.html#ga954fca340a3edce50c5279eec20e053d">uvrpc_server_stop</a>(server);</div>
<div class="line"><span class="lineno">  278</span>    </div>
<div class="line"><span class="lineno">  279</span>    <span class="comment">/* Free UVBus */</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">if</span> (server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>) {</div>
<div class="line"><span class="lineno">  281</span>        <a class="code hl_function" href="uvbus_8h.html#a46fd342d85cab0698182c7bce87d58bb">uvbus_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>);</div>
<div class="line"><span class="lineno">  282</span>    }</div>
<div class="line"><span class="lineno">  283</span>    </div>
<div class="line"><span class="lineno">  284</span>    <span class="comment">/* Free handlers */</span></div>
<div class="line"><span class="lineno">  285</span>    <a class="code hl_struct" href="structhandler__entry.html">handler_entry_t</a>* entry, *tmp;</div>
<div class="line"><span class="lineno">  286</span>    HASH_ITER(hh, server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a205ffe44a50d980833e9d8128cbc9ad6">handlers</a>, entry, tmp) {</div>
<div class="line"><span class="lineno">  287</span>        HASH_DEL(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a205ffe44a50d980833e9d8128cbc9ad6">handlers</a>, entry);</div>
<div class="line"><span class="lineno">  288</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(entry-&gt;<a class="code hl_variable" href="structhandler__entry.html#a94286c03593993c8729f0efd456d9577">name</a>);</div>
<div class="line"><span class="lineno">  289</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(entry);</div>
<div class="line"><span class="lineno">  290</span>    }</div>
<div class="line"><span class="lineno">  291</span>    </div>
<div class="line"><span class="lineno">  292</span>    <span class="comment">/* Free pending requests ring buffer */</span></div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">if</span> (server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>) {</div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#adb5663edacd9c3eaaaca92fd88172ddc">max_pending_requests</a>; i++) {</div>
<div class="line"><span class="lineno">  295</span>            <span class="keywordflow">if</span> (server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>[i]) {</div>
<div class="line"><span class="lineno">  296</span>                <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>[i]);</div>
<div class="line"><span class="lineno">  297</span>            }</div>
<div class="line"><span class="lineno">  298</span>        }</div>
<div class="line"><span class="lineno">  299</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a2521699688fc695d8b6299897e5a089c">pending_requests</a>);</div>
<div class="line"><span class="lineno">  300</span>    }</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  303</span>    <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(server);</div>
<div class="line"><span class="lineno">  304</span>}</div>
<div class="ttc" id="agroup__ServerAPI_html_ga954fca340a3edce50c5279eec20e053d"><div class="ttname"><a href="group__ServerAPI.html#ga954fca340a3edce50c5279eec20e053d">uvrpc_server_stop</a></div><div class="ttdeci">void uvrpc_server_stop(uvrpc_server_t *server)</div><div class="ttdoc">Stop the server.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00267">uvrpc_server.c:267</a></div></div>
<div class="ttc" id="astructhandler__entry_html"><div class="ttname"><a href="structhandler__entry.html">handler_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00034">uvrpc_server.c:34</a></div></div>
<div class="ttc" id="astructhandler__entry_html_a94286c03593993c8729f0efd456d9577"><div class="ttname"><a href="structhandler__entry.html#a94286c03593993c8729f0efd456d9577">handler_entry::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00035">uvrpc_server.c:35</a></div></div>
<div class="ttc" id="auvbus_8h_html_a46fd342d85cab0698182c7bce87d58bb"><div class="ttname"><a href="uvbus_8h.html#a46fd342d85cab0698182c7bce87d58bb">uvbus_free</a></div><div class="ttdeci">void uvbus_free(uvbus_t *bus)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00345">uvbus.c:345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00052">uvrpc_server::address</a>, <a class="el" href="uvrpc__server_8c_source.html#l00054">uvrpc_server::handlers</a>, <a class="el" href="uvrpc__server_8c_source.html#l00062">uvrpc_server::max_pending_requests</a>, <a class="el" href="uvrpc__server_8c_source.html#l00035">handler_entry::name</a>, <a class="el" href="uvrpc__server_8c_source.html#l00061">uvrpc_server::pending_requests</a>, <a class="el" href="uvrpc__server_8c_source.html#l00053">uvrpc_server::uvbus</a>, <a class="el" href="uvbus_8c_source.html#l00345">uvbus_free()</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00170">uvrpc_free()</a>, and <a class="el" href="uvrpc__server_8c_source.html#l00267">uvrpc_server_stop()</a>.</p>

</div>
</div>
<a id="ga5a584b68b5128541828eeb57e527a0b6" name="ga5a584b68b5128541828eeb57e527a0b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a584b68b5128541828eeb57e527a0b6">&#9670;&nbsp;</a></span>uvrpc_server_get_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uvrpc_8h.html#a1267360dffceedbb9a190699dbe91c52">uvrpc_context_t</a> * uvrpc_server_get_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get server context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Context instance </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00351">351</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  351</span>                                                                  {</div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">return</span> server ? server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a0941530327bee932f9d483cfdddb32ca">ctx</a> : NULL;</div>
<div class="line"><span class="lineno">  353</span>}</div>
<div class="ttc" id="astructuvrpc__server_html_a0941530327bee932f9d483cfdddb32ca"><div class="ttname"><a href="structuvrpc__server.html#a0941530327bee932f9d483cfdddb32ca">uvrpc_server::ctx</a></div><div class="ttdeci">uvrpc_context_t * ctx</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00058">uvrpc_server.c:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00058">uvrpc_server::ctx</a>.</p>

</div>
</div>
<a id="gaa23f24c364aa1174d1791926433a1fb0" name="gaa23f24c364aa1174d1791926433a1fb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa23f24c364aa1174d1791926433a1fb0">&#9670;&nbsp;</a></span>uvrpc_server_get_total_requests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t uvrpc_server_get_total_requests </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get total requests received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total number of requests received </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00143">143</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  143</span>                                                                 {</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">if</span> (!server) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">return</span> server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a75fe31a37e1452b19ef42791612ecc69">total_requests</a>;</div>
<div class="line"><span class="lineno">  146</span>}</div>
<div class="ttc" id="astructuvrpc__server_html_a75fe31a37e1452b19ef42791612ecc69"><div class="ttname"><a href="structuvrpc__server.html#a75fe31a37e1452b19ef42791612ecc69">uvrpc_server::total_requests</a></div><div class="ttdeci">uint64_t total_requests</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00066">uvrpc_server.c:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00066">uvrpc_server::total_requests</a>.</p>

</div>
</div>
<a id="ga0db659101ae7ed222dbf760b19bf42db" name="ga0db659101ae7ed222dbf760b19bf42db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0db659101ae7ed222dbf760b19bf42db">&#9670;&nbsp;</a></span>uvrpc_server_get_total_responses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t uvrpc_server_get_total_responses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get total responses sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total number of responses sent </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00148">148</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  148</span>                                                                  {</div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">if</span> (!server) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">return</span> server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a215d2edd99a588ec00ec4d22a0f19ca3">total_responses</a>;</div>
<div class="line"><span class="lineno">  151</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00067">uvrpc_server::total_responses</a>.</p>

</div>
</div>
<a id="gafb0b4c350e56c93909067ea12d1cefa9" name="gafb0b4c350e56c93909067ea12d1cefa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb0b4c350e56c93909067ea12d1cefa9">&#9670;&nbsp;</a></span>uvrpc_server_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvrpc_server_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#ad44acde8ec79ff9da45d213a32ccca12">uvrpc_handler_t</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a method handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
    <tr><td class="paramname">method</td><td>Method name </td></tr>
    <tr><td class="paramname">handler</td><td>Handler function </td></tr>
    <tr><td class="paramname">ctx</td><td>User context passed to handler </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>UVRPC_OK on success, error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00307">307</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  308</span>                                                              {</div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">if</span> (!server || !method || !handler) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d">UVRPC_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno">  310</span>    </div>
<div class="line"><span class="lineno">  311</span>    </div>
<div class="line"><span class="lineno">  312</span>    <span class="comment">/* Check if handler already exists */</span></div>
<div class="line"><span class="lineno">  313</span>    <a class="code hl_struct" href="structhandler__entry.html">handler_entry_t</a>* entry = NULL;</div>
<div class="line"><span class="lineno">  314</span>    HASH_FIND_STR(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a205ffe44a50d980833e9d8128cbc9ad6">handlers</a>, method, entry);</div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordflow">if</span> (entry) {</div>
<div class="line"><span class="lineno">  316</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a01dc6ff93d6b6c548ff87f96bf31b4c7">UVRPC_ERROR</a>; <span class="comment">/* Handler already registered */</span></div>
<div class="line"><span class="lineno">  317</span>    }</div>
<div class="line"><span class="lineno">  318</span>    </div>
<div class="line"><span class="lineno">  319</span>    <span class="comment">/* Create new entry */</span></div>
<div class="line"><span class="lineno">  320</span>    entry = <a class="code hl_function" href="group__AllocatorAPI.html#ga91fe7dfcd5db69a938f8e8e9291677ae">uvrpc_calloc</a>(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structhandler__entry.html">handler_entry_t</a>));</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">if</span> (!entry) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72af77fe4914a80f34a820ee3160360256c">UVRPC_ERROR_NO_MEMORY</a>;</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>    <span class="comment">/* Create lowercase copy for case-insensitive lookup */</span></div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordtype">char</span>* method_lower = <a class="code hl_function" href="group__AllocatorAPI.html#ga73a86be88aff6f12142368fced3605f2">uvrpc_strdup</a>(method);</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">if</span> (!method_lower) {</div>
<div class="line"><span class="lineno">  326</span>        <a class="code hl_function" href="group__AllocatorAPI.html#ga067f00c05f4a005dae8fc92d39875de4">uvrpc_free</a>(entry);</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72af77fe4914a80f34a820ee3160360256c">UVRPC_ERROR_NO_MEMORY</a>;</div>
<div class="line"><span class="lineno">  328</span>    }</div>
<div class="line"><span class="lineno">  329</span>    </div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">for</span> (<span class="keywordtype">char</span>* p = method_lower; *p; p++) {</div>
<div class="line"><span class="lineno">  331</span>        *p = tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*p);</div>
<div class="line"><span class="lineno">  332</span>    }</div>
<div class="line"><span class="lineno">  333</span>    </div>
<div class="line"><span class="lineno">  334</span>    entry-&gt;<a class="code hl_variable" href="structhandler__entry.html#a94286c03593993c8729f0efd456d9577">name</a> = method_lower;  <span class="comment">/* Store lowercase name in hash table */</span></div>
<div class="line"><span class="lineno">  335</span>    entry-&gt;<a class="code hl_variable" href="structhandler__entry.html#aea190e3a8f6fe15504d7c9b11ad1e2b8">handler</a> = handler;</div>
<div class="line"><span class="lineno">  336</span>    entry-&gt;<a class="code hl_variable" href="structhandler__entry.html#a7b88fe8e623a47448a7f9959666c9109">ctx</a> = ctx;</div>
<div class="line"><span class="lineno">  337</span>    </div>
<div class="line"><span class="lineno">  338</span>    HASH_ADD_STR(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a205ffe44a50d980833e9d8128cbc9ad6">handlers</a>, name, entry);</div>
<div class="line"><span class="lineno">  339</span>    </div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>;</div>
<div class="line"><span class="lineno">  341</span>}</div>
<div class="ttc" id="astructhandler__entry_html_a7b88fe8e623a47448a7f9959666c9109"><div class="ttname"><a href="structhandler__entry.html#a7b88fe8e623a47448a7f9959666c9109">handler_entry::ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00037">uvrpc_server.c:37</a></div></div>
<div class="ttc" id="astructhandler__entry_html_aea190e3a8f6fe15504d7c9b11ad1e2b8"><div class="ttname"><a href="structhandler__entry.html#aea190e3a8f6fe15504d7c9b11ad1e2b8">handler_entry::handler</a></div><div class="ttdeci">uvrpc_handler_t handler</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc__server_8c_source.html#l00036">uvrpc_server.c:36</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3395bc40082fb5185a07c39c649d3e72a01dc6ff93d6b6c548ff87f96bf31b4c7"><div class="ttname"><a href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a01dc6ff93d6b6c548ff87f96bf31b4c7">UVRPC_ERROR</a></div><div class="ttdeci">@ UVRPC_ERROR</div><div class="ttdoc">General error.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00044">uvrpc.h:44</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3395bc40082fb5185a07c39c649d3e72af77fe4914a80f34a820ee3160360256c"><div class="ttname"><a href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72af77fe4914a80f34a820ee3160360256c">UVRPC_ERROR_NO_MEMORY</a></div><div class="ttdeci">@ UVRPC_ERROR_NO_MEMORY</div><div class="ttdoc">Memory allocation failed.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00046">uvrpc.h:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00037">handler_entry::ctx</a>, <a class="el" href="uvrpc__server_8c_source.html#l00036">handler_entry::handler</a>, <a class="el" href="uvrpc__server_8c_source.html#l00054">uvrpc_server::handlers</a>, <a class="el" href="uvrpc__server_8c_source.html#l00035">handler_entry::name</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00134">uvrpc_calloc()</a>, <a class="el" href="uvrpc_8h_source.html#l00044">UVRPC_ERROR</a>, <a class="el" href="uvrpc_8h_source.html#l00045">UVRPC_ERROR_INVALID_PARAM</a>, <a class="el" href="uvrpc_8h_source.html#l00046">UVRPC_ERROR_NO_MEMORY</a>, <a class="el" href="uvrpc__allocator_8c_source.html#l00170">uvrpc_free()</a>, <a class="el" href="uvrpc_8h_source.html#l00043">UVRPC_OK</a>, and <a class="el" href="uvrpc__allocator_8c_source.html#l00199">uvrpc_strdup()</a>.</p>

</div>
</div>
<a id="gad1d0a24ea024d981d8f8e4b806a5709b" name="gad1d0a24ea024d981d8f8e4b806a5709b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1d0a24ea024d981d8f8e4b806a5709b">&#9670;&nbsp;</a></span>uvrpc_server_set_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uvrpc_server_set_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#a1267360dffceedbb9a190699dbe91c52">uvrpc_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set server context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
    <tr><td class="paramname">ctx</td><td>Context to attach </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00344">344</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  344</span>                                                                            {</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">if</span> (server) {</div>
<div class="line"><span class="lineno">  346</span>        server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a0941530327bee932f9d483cfdddb32ca">ctx</a> = ctx;</div>
<div class="line"><span class="lineno">  347</span>    }</div>
<div class="line"><span class="lineno">  348</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00058">uvrpc_server::ctx</a>.</p>

</div>
</div>
<a id="ga209b5f9a4a5635b21ee8ae5c64b8c674" name="ga209b5f9a4a5635b21ee8ae5c64b8c674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga209b5f9a4a5635b21ee8ae5c64b8c674">&#9670;&nbsp;</a></span>uvrpc_server_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvrpc_server_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>UVRPC_OK on success, error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00239">239</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  239</span>                                               {</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">if</span> (!server || !server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d">UVRPC_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">if</span> (server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#abbda7b8eea00aad2c89b243e250fdabb">is_running</a>) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <a class="code hl_enumeration" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59">uvbus_error_t</a> err = <a class="code hl_function" href="uvbus_8h.html#a30faabd1a57fc5094f1e19de7f51d3be">uvbus_listen</a>(server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a6b4dcf26ce80972b56d4b5aa5651d0b4">uvbus</a>);</div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59a3597b5536b36c9678593c04d1619ff4b">UVBUS_OK</a>) {</div>
<div class="line"><span class="lineno">  246</span>        <span class="comment">/* Map UVBus errors to UVRPC errors */</span></div>
<div class="line"><span class="lineno">  247</span>        <span class="keywordflow">switch</span> (err) {</div>
<div class="line"><span class="lineno">  248</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59af90330a9734d840cb84ed18e55939f91">UVBUS_ERROR_ALREADY_EXISTS</a>:</div>
<div class="line"><span class="lineno">  249</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aca0a3b833687dbc3cdb59392fe7d2210">UVRPC_ERROR_ALREADY_EXISTS</a>;</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59ad93db1224a7dbaca46dd014763c5ddcc">UVBUS_ERROR_NO_MEMORY</a>:</div>
<div class="line"><span class="lineno">  251</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72af77fe4914a80f34a820ee3160360256c">UVRPC_ERROR_NO_MEMORY</a>;</div>
<div class="line"><span class="lineno">  252</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59a8d235591462a6997474c2877dfca40db">UVBUS_ERROR_INVALID_PARAM</a>:</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72a8d73874fe8173df9dd37c1f73799d00d">UVRPC_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  255</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aebd7c495f5311f67868d8f63d62a3c00">UVRPC_ERROR_TRANSPORT</a>;</div>
<div class="line"><span class="lineno">  256</span>        }</div>
<div class="line"><span class="lineno">  257</span>    }</div>
<div class="line"><span class="lineno">  258</span>    </div>
<div class="line"><span class="lineno">  259</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#abbda7b8eea00aad2c89b243e250fdabb">is_running</a> = 1;</div>
<div class="line"><span class="lineno">  260</span>    </div>
<div class="line"><span class="lineno">  261</span>    printf(<span class="stringliteral">&quot;Server started on %s\n&quot;</span>, server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#a7d75510a40989400da1d85b4dec43004">address</a>);</div>
<div class="line"><span class="lineno">  262</span>    </div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72ac2c13b8fa81012294dc8e35d78e1d2d1">UVRPC_OK</a>;</div>
<div class="line"><span class="lineno">  264</span>}</div>
<div class="ttc" id="auvbus_8h_html_a30faabd1a57fc5094f1e19de7f51d3be"><div class="ttname"><a href="uvbus_8h.html#a30faabd1a57fc5094f1e19de7f51d3be">uvbus_listen</a></div><div class="ttdeci">uvbus_error_t uvbus_listen(uvbus_t *bus)</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8c_source.html#l00198">uvbus.c:198</a></div></div>
<div class="ttc" id="auvbus_8h_html_ae709b2472bc33f6d34b6612fef049b59a8d235591462a6997474c2877dfca40db"><div class="ttname"><a href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59a8d235591462a6997474c2877dfca40db">UVBUS_ERROR_INVALID_PARAM</a></div><div class="ttdeci">@ UVBUS_ERROR_INVALID_PARAM</div><div class="ttdoc">Invalid parameter.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00041">uvbus.h:41</a></div></div>
<div class="ttc" id="auvbus_8h_html_ae709b2472bc33f6d34b6612fef049b59ad93db1224a7dbaca46dd014763c5ddcc"><div class="ttname"><a href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59ad93db1224a7dbaca46dd014763c5ddcc">UVBUS_ERROR_NO_MEMORY</a></div><div class="ttdeci">@ UVBUS_ERROR_NO_MEMORY</div><div class="ttdoc">Memory allocation failed.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00042">uvbus.h:42</a></div></div>
<div class="ttc" id="auvbus_8h_html_ae709b2472bc33f6d34b6612fef049b59af90330a9734d840cb84ed18e55939f91"><div class="ttname"><a href="uvbus_8h.html#ae709b2472bc33f6d34b6612fef049b59af90330a9734d840cb84ed18e55939f91">UVBUS_ERROR_ALREADY_EXISTS</a></div><div class="ttdeci">@ UVBUS_ERROR_ALREADY_EXISTS</div><div class="ttdoc">Resource already exists.</div><div class="ttdef"><b>Definition:</b> <a href="uvbus_8h_source.html#l00046">uvbus.h:46</a></div></div>
<div class="ttc" id="auvrpc_8h_html_a3395bc40082fb5185a07c39c649d3e72aca0a3b833687dbc3cdb59392fe7d2210"><div class="ttname"><a href="uvrpc_8h.html#a3395bc40082fb5185a07c39c649d3e72aca0a3b833687dbc3cdb59392fe7d2210">UVRPC_ERROR_ALREADY_EXISTS</a></div><div class="ttdeci">@ UVRPC_ERROR_ALREADY_EXISTS</div><div class="ttdoc">Resource already exists.</div><div class="ttdef"><b>Definition:</b> <a href="uvrpc_8h_source.html#l00055">uvrpc.h:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00052">uvrpc_server::address</a>, <a class="el" href="uvrpc__server_8c_source.html#l00055">uvrpc_server::is_running</a>, <a class="el" href="uvrpc__server_8c_source.html#l00053">uvrpc_server::uvbus</a>, <a class="el" href="uvbus_8h_source.html#l00046">UVBUS_ERROR_ALREADY_EXISTS</a>, <a class="el" href="uvbus_8h_source.html#l00041">UVBUS_ERROR_INVALID_PARAM</a>, <a class="el" href="uvbus_8h_source.html#l00042">UVBUS_ERROR_NO_MEMORY</a>, <a class="el" href="uvbus_8c_source.html#l00198">uvbus_listen()</a>, <a class="el" href="uvbus_8h_source.html#l00039">UVBUS_OK</a>, <a class="el" href="uvrpc_8h_source.html#l00055">UVRPC_ERROR_ALREADY_EXISTS</a>, <a class="el" href="uvrpc_8h_source.html#l00045">UVRPC_ERROR_INVALID_PARAM</a>, <a class="el" href="uvrpc_8h_source.html#l00046">UVRPC_ERROR_NO_MEMORY</a>, <a class="el" href="uvrpc_8h_source.html#l00049">UVRPC_ERROR_TRANSPORT</a>, and <a class="el" href="uvrpc_8h_source.html#l00043">UVRPC_OK</a>.</p>

</div>
</div>
<a id="ga954fca340a3edce50c5279eec20e053d" name="ga954fca340a3edce50c5279eec20e053d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga954fca340a3edce50c5279eec20e053d">&#9670;&nbsp;</a></span>uvrpc_server_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uvrpc_server_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvrpc_8h.html#af92095e9b3ee6ef008ad632c601d2a7f">uvrpc_server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the server. </p>
<p >Stops accepting new connections but allows existing connections to complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Server instance </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="uvrpc__server_8c_source.html#l00267">267</a> of file <a class="el" href="uvrpc__server_8c_source.html">uvrpc_server.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  267</span>                                               {</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">if</span> (!server) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  269</span>    </div>
<div class="line"><span class="lineno">  270</span>    server-&gt;<a class="code hl_variable" href="structuvrpc__server.html#abbda7b8eea00aad2c89b243e250fdabb">is_running</a> = 0;</div>
<div class="line"><span class="lineno">  271</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="uvrpc__server_8c_source.html#l00055">uvrpc_server::is_running</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvrpc__server_8c_source.html#l00274">uvrpc_server_free()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
