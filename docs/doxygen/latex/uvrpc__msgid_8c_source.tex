\hypertarget{uvrpc__msgid_8c_source}{}\doxysection{uvrpc\+\_\+msgid.\+c}
\label{uvrpc__msgid_8c_source}\index{src/uvrpc\_msgid.c@{src/uvrpc\_msgid.c}}
\mbox{\hyperlink{uvrpc__msgid_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{uvrpc__msgid_8h}{uvrpc\_msgid.h}}"{}}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00006}00006 \textcolor{preprocessor}{\#include "{}../include/uvrpc\_allocator.h"{}}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00007}00007 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00009}00009 \textcolor{comment}{/* Create message ID context */}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00010}\mbox{\hyperlink{uvrpc__msgid_8c_a119dfc4c63541db6b7550315be6a5ede}{00010}} \mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}* \mbox{\hyperlink{uvrpc__msgid_8c_a119dfc4c63541db6b7550315be6a5ede}{uvrpc\_msgid\_ctx\_new}}(\textcolor{keywordtype}{void}) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00011}00011     \mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}* ctx = (\mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}*)\mbox{\hyperlink{group__AllocatorAPI_ga91fe7dfcd5db69a938f8e8e9291677ae}{uvrpc\_calloc}}(1, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}));}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00012}00012     \textcolor{keywordflow}{if} (!ctx) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00014}00014     ctx-\/>\mbox{\hyperlink{structuvrpc__msgid__ctx__t_a017c73b5ee9cc2210e4f7e2d4cc3a886}{next\_seq}} = 1;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00016}00016     \textcolor{keywordflow}{return} ctx;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00017}00017 \}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00019}00019 \textcolor{comment}{/* Free message ID context */}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00020}\mbox{\hyperlink{uvrpc__msgid_8c_a6fcca755fc4c066f532f7be6c3304837}{00020}} \textcolor{keywordtype}{void} \mbox{\hyperlink{uvrpc__msgid_8c_a6fcca755fc4c066f532f7be6c3304837}{uvrpc\_msgid\_ctx\_free}}(\mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}* ctx) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00021}00021     \textcolor{keywordflow}{if} (ctx) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00022}00022         \mbox{\hyperlink{group__AllocatorAPI_ga067f00c05f4a005dae8fc92d39875de4}{uvrpc\_free}}(ctx);}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00023}00023     \}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00024}00024 \}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00026}00026 \textcolor{comment}{/* Set initial sequence number (for multi-\/client scenarios) */}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00027}\mbox{\hyperlink{uvrpc__msgid_8c_a73aeadc5b317a416049ec636873fbc5e}{00027}} \textcolor{keywordtype}{void} \mbox{\hyperlink{uvrpc__msgid_8c_a73aeadc5b317a416049ec636873fbc5e}{uvrpc\_msgid\_ctx\_set\_start}}(\mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}* ctx, uint32\_t start\_seq) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00028}00028     \textcolor{keywordflow}{if} (ctx) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00029}00029         ctx-\/>\mbox{\hyperlink{structuvrpc__msgid__ctx__t_a017c73b5ee9cc2210e4f7e2d4cc3a886}{next\_seq}} = start\_seq;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00030}00030     \}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00031}00031 \}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00033}00033 \textcolor{comment}{/* Generate next message ID (32-\/bit) */}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00034}\mbox{\hyperlink{uvrpc__msgid_8c_a932e18db85429d253aeb248bbc2effcc}{00034}} uint32\_t \mbox{\hyperlink{uvrpc__msgid_8c_a932e18db85429d253aeb248bbc2effcc}{uvrpc\_msgid\_next}}(\mbox{\hyperlink{structuvrpc__msgid__ctx__t}{uvrpc\_msgid\_ctx\_t}}* ctx) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00035}00035     \textcolor{keywordflow}{if} (!ctx) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00037}00037     uint32\_t msgid = ctx-\/>\mbox{\hyperlink{structuvrpc__msgid__ctx__t_a017c73b5ee9cc2210e4f7e2d4cc3a886}{next\_seq}}++;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00038}00038     }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00039}00039     \textcolor{comment}{/* Wrap around on overflow (32-\/bit) */}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00040}00040     \textcolor{keywordflow}{if} (ctx-\/>\mbox{\hyperlink{structuvrpc__msgid__ctx__t_a017c73b5ee9cc2210e4f7e2d4cc3a886}{next\_seq}} == 0) \{}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00041}00041         ctx-\/>\mbox{\hyperlink{structuvrpc__msgid__ctx__t_a017c73b5ee9cc2210e4f7e2d4cc3a886}{next\_seq}} = 1;  \textcolor{comment}{/* Skip 0, start from 1 */}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00042}00042     \}}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00043}00043     }
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00044}00044     \textcolor{keywordflow}{return} msgid;}
\DoxyCodeLine{\Hypertarget{uvrpc__msgid_8c_source_l00045}00045 \}}

\end{DoxyCode}
